<div id="applicable-attributes-panel" [class.details-open]="activeAttribute" [class.details-minimized]="!detailsExpanded">
    <h3 class="pt-3 px-3 m-0">Applicable Attributes</h3>
    <div class="p-3">
        <input type="search" class="form-control" [(ngModel)]="attributeFilter" placeholder="Filter Attributes...">
    </div>

    <div class="px-3 py-2 attribute" *ngFor="let attribute of attributes?.items | alphabetical | textMatch:attributeFilter | domainMatch:activeDomain | duplicateFilter:activeDomain?.referencedComponentId"
         (click)="makeActiveAttribute(attribute)"
         [class.active]="attribute === activeAttribute">{{attribute.referencedComponent.fsn?.term}}
    </div>
    <ng-container *ngIf="activeDomain?.additionalFields.parentDomain">
        <div class="px-3 py-2 attribute attached" *ngFor="let attribute of attributes?.items | alphabetical | inheritedDomainMatch:activeDomain:domains.items | duplicateFilter:activeDomain?.referencedComponentId">
            {{attribute.referencedComponent.fsn?.term}}
        </div>
    </ng-container>
    <div *ngIf="activeAttribute" class="details" [class.minimized]="!detailsExpanded">
        <h5 class="detail-title p-2">
            <span class="float-right" (click)="detailsExpanded = !detailsExpanded">
                <i *ngIf="detailsExpanded" class="fas fa-caret-down"></i>
                <i *ngIf="!detailsExpanded" class="fas fa-caret-up"></i>
            </span>
        </h5>
        <ng-container *ngIf="activeAttribute.additionalFields.grouped">
            <h5 class="label m-2">Grouped</h5>
            <input type="text" class="detail m-2 mb-3 px-2 rounded" [(ngModel)]="activeAttribute.additionalFields.grouped" [disabled]="!editable" (change)="updateAttribute()">
        </ng-container>
        <ng-container *ngIf="activeAttribute.additionalFields.attributeCardinality">
            <h5 class="label m-2">Attribute Cardinality</h5>
            <input type="text" class="detail m-2 mb-3 px-2 rounded" [(ngModel)]="activeAttribute.additionalFields.attributeCardinality" [disabled]="!editable"(change)="updateAttribute()">
        </ng-container>
        <ng-container *ngIf="activeAttribute.additionalFields.attributeInGroupCardinality">
            <h5 class="label m-2">Attribute in Group Cardinality</h5>
            <input type="text" class="detail m-2 mb-3 px-2 rounded" [(ngModel)]="activeAttribute.additionalFields.attributeInGroupCardinality" [disabled]="!editable"(change)="updateAttribute()">
        </ng-container>
        <ng-container *ngIf="activeAttribute.additionalFields.ruleStrengthId">
            <h5 class="label m-2">Rule Strength</h5>
            <select class="detail m-2 mb-3 px-2 rounded" [(ngModel)]="activeAttribute.additionalFields.ruleStrengthId" [disabled]="!editable"(change)="updateAttribute()">
                <option *ngFor="let ruleStrength of ruleStrengthFields" [value]="ruleStrength.id" >{{ruleStrength.term}}</option>
            </select>
        </ng-container>
        <ng-container *ngIf="activeAttribute.additionalFields.contentTypeId">
            <h5 class="label m-2">Content Type</h5>
            <select class="detail m-2 mb-3 px-2 rounded" [(ngModel)]="activeAttribute.additionalFields.contentTypeId" [disabled]="!editable"(change)="updateAttribute()">
                <option *ngFor="let contentType of contentTypeFields" [value]="contentType.id">{{contentType.term}}</option>
            </select>
        </ng-container>
    </div>
</div>
