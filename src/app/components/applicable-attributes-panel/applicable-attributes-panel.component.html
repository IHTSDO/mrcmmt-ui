<div id="applicable-attributes-panel" [class.details-open]="activeAttribute" [class.details-minimized]="!detailsExpanded">
    <h3 class="pt-3 px-3 m-0">Applicable Attributes</h3>
    <div class="p-3">
        <input type="search" class="form-control" [(ngModel)]="attributeFilter" placeholder="Filter Attributes...">
    </div>

    <div class="px-3 py-2 attribute" *ngFor="let attribute of attributes | alphabetical | textMatch:attributeFilter | domainMatch:activeDomain | duplicateFilter:activeDomain?.referencedComponentId"
         (click)="makeActiveAttribute(attribute)"
         [class.active]="attribute === activeAttribute">{{attribute.referencedComponent.fsn?.term}}
    </div>
    <ng-container *ngIf="activeDomain?.additionalFields.parentDomain">
        <div class="px-3 py-2 attribute attached" *ngFor="let attribute of attributes | alphabetical | inheritedDomainMatch:activeDomain:domains | duplicateFilter:activeDomain?.referencedComponentId">
            {{attribute.referencedComponent.fsn?.term}}
        </div>
    </ng-container>
    <div *ngIf="activeAttribute" class="details" [class.minimized]="!detailsExpanded">
        <h4 class="detail-title p-2">
            <span class="float-right" (click)="detailsExpanded = !detailsExpanded">
                <i *ngIf="detailsExpanded" class="fas fa-caret-down"></i>
                <i *ngIf="!detailsExpanded" class="fas fa-caret-up"></i>
            </span>
        </h4>
        <ng-container *ngIf="activeAttribute.additionalFields.grouped">
            <h4 class="label m-2">Grouped</h4>
            <div class="detail m-2 mb-3 px-2 rounded">{{activeAttribute.additionalFields.grouped}}</div>
        </ng-container>
        <ng-container *ngIf="activeAttribute.additionalFields.attributeCardinality">
            <h4 class="label m-2">Attribute Cardinality</h4>
            <div class="detail m-2 mb-3 px-2 rounded">{{activeAttribute.additionalFields.attributeCardinality}}</div>
        </ng-container>
        <ng-container *ngIf="activeAttribute.additionalFields.attributeInGroupCardinality">
            <h4 class="label m-2">Attribute in Group Cardinality</h4>
            <div class="detail m-2 mb-3 px-2 rounded">{{activeAttribute.additionalFields.attributeInGroupCardinality}}</div>
        </ng-container>
        <ng-container *ngIf="activeAttribute.additionalFields.ruleStrengthId">
            <h4 class="label m-2">Rule Strength</h4>
            <div class="detail m-2 mb-3 px-2 rounded">{{determineMandatoryField(activeAttribute.additionalFields.ruleStrengthId)}}</div>
        </ng-container>
        <ng-container *ngIf="activeAttribute.additionalFields.contentTypeId">
            <h4 class="label m-2">Content Type</h4>
            <div class="detail m-2 mb-3 px-2 rounded">{{determineContentTypeField(activeAttribute.additionalFields.contentTypeId)}}</div>
        </ng-container>
    </div>
</div>
